/*! PageUp's Angular Feature Flags v1.6.2 Â© 2018 Michael Taranto */
!function(){function e(e,n,t){var a={},r=[],i="",f=0,u=function(e){return a[i]&&a[i][e]},l=function(n){var t=e.defer();return t.resolve(n),t.promise},s=function(e){return n.isPresent(e)},o=function(e){return s(e)?"true"===n.get(e):u(e)},c=function(e){return u(e)},g=function(e){return e?-1!==e.indexOf(f):!0},d=function(e){var n=(new Date).toISOString();return e?n>e:!1},v=function(e,n){return e&&g(n.instances)&&!d(n.expires)},m=function(e){return angular.copy(e,r),r.forEach(function(e){angular.forEach(e.environments,function(n,t){a[t]||(a[t]={}),a[t][e.key]=v(n,e),e.environments[t]=o(e.key)})}),r},O=function(e){return e.then(function(e){return m(e.data||e)})},y=function(){return r},p=function(e){return angular.isArray(e)?l(m(e)):O(e)},F=function(e){i=e,n.setEnvironment(e)},k=function(e){n.setAppName(e)},h=function(e){f=e},b=function(e){n.set(e,!0)},E=function(e){n.set(e,!1)},A=function(e){n.remove(e)},I=function(){t&&p(t)};return I(),{set:p,get:y,enable:b,disable:E,reset:A,isOn:o,isOnByDefault:c,isOverridden:s,setEnvironment:F,setAppName:k,setInstance:h}}angular.module("feature-flags",[]),angular.module("feature-flags").directive("featureFlag",["featureFlags","$interpolate",function(e,n){return{transclude:"element",priority:599,terminal:!0,restrict:"A",$$tlb:!0,compile:function(t,a){var r="featureFlagHide"in a;return t[0].textContent=" featureFlag: "+a.featureFlag+" is "+(r?"on":"off")+" ",function(t,a,i,f,u){var l,s;t.$watch(function(){var a=n(i.featureFlag)(t);return e.isOn(a)},function(e){var n=r?!e:e;n?(s=t.$new(),u(s,function(e){l=e,a.after(l).remove()})):(s&&(s.$destroy(),s=null),l&&(l.after(a).remove(),l=null))})}}}}]),angular.module("feature-flags").directive("featureFlagOverrides",["featureFlags",function(e){return{restrict:"A",link:function(n){n.flags=e.get(),n.isOn=e.isOn,n.isOverridden=e.isOverridden,n.enable=e.enable,n.disable=e.disable,n.reset=e.reset,n.isOnByDefault=e.isOnByDefault},template:'<div class="feature-flags">  <h2 class="feature-flags-heading">Feature Flags</h2>  <div id="feature-flag--{{flag.key}}" class="feature-flags-flag" ng-repeat="flag in flags">    <div class="feature-flags-name">{{flag.name || flag.key}}</div>      <div id="feature-flag--{{flag.key}}--enable" class="feature-flags-switch" ng-click="enable(flag.key)" ng-class="{\'active\': isOverridden(flag.key) && isOn(flag.key)}">ON</div>      <div id="feature-flag--{{flag.key}}--disable" class="feature-flags-switch" ng-click="disable(flag.key)" ng-class="{\'active\': isOverridden(flag.key) && !isOn(flag.key)}">OFF</div>      <div id="feature-flag--{{flag.key}}--reset" class="feature-flags-switch" ng-click="reset(flag.key)" ng-class="{\'active\': !isOverridden(flag.key)}">DEFAULT ({{isOnByDefault(flag.key) ? \'ON\' : \'OFF\'}})</div>    <div class="feature-flags-desc">{{flag.description}}</div>  </div></div>',replace:!0}}]),angular.module("feature-flags").service("featureFlagOverrides",["$rootElement",function(e){var n=e.attr("ng-app"),t="",a="featureFlags."+n+".",r=function(){try{return localStorage.setItem("featureFlags.availableTest","test"),localStorage.removeItem("featureFlags.availableTest"),!0}catch(e){return!1}}(),i=function(e){return a+e},f=function(e){return 0===e.indexOf(a)},u=function(){return"featureFlags."+n+"."+(t&&t+".")},l=function(e){t=e,a=u()},s=function(e){n=e,a=u()},o=function(e,n){r&&localStorage.setItem(i(n),e)},c=function(e){return r?localStorage.getItem(i(e)):void 0},g=function(e){r&&localStorage.removeItem(i(e))};return{isPresent:function(e){var n=c(e);return"undefined"!=typeof n&&null!==n},setEnvironment:l,setAppName:s,get:c,set:function(e,n){angular.isObject(e)?angular.forEach(e,o):o(n,e)},remove:g,reset:function(){var e;if(r)for(e in localStorage)f(e)&&localStorage.removeItem(e)}}}]),angular.module("feature-flags").provider("featureFlags",function(){var n=[],t="prod",a="";this.setInitialFlags=function(e){n=e},this.setEnvironment=function(e){t=e},this.setAppName=function(e){a=e},this.$get=["$q","featureFlagOverrides",function(r,i){var f=new e(r,i,n);return t&&f.setEnvironment(t),a&&f.setAppName(a),f}]})}();